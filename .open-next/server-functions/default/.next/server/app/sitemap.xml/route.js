"use strict";(()=>{var e={};e.id=6717,e.ids=[6717],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4807:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>eg,patchFetch:()=>ew,requestAsyncStorage:()=>ed,routeModule:()=>ef,serverHooks:()=>ey,staticGenerationAsyncStorage:()=>em});var o={};r.r(o),r.d(o,{default:()=>ea});var i={};r.r(i),r.d(i,{GET:()=>eh});var s=r(9303),n=r(8716),a=r(670),l=r(5661);class u extends Error{response;request;options;constructor(e,t,r){let o=e.status||0===e.status?e.status:"",i=e.statusText||"",s=`${o} ${i}`.trim();super(`Request failed with ${s?`status code ${s}`:"an unknown error"}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=r}}class c extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}let p=e=>null!==e&&"object"==typeof e,h=(...e)=>{for(let t of e)if((!p(t)||Array.isArray(t))&&void 0!==t)throw TypeError("The `options` argument must be an object");return y({},...e)},f=(e={},t={})=>{let r=new globalThis.Headers(e),o=t instanceof globalThis.Headers;for(let[e,i]of new globalThis.Headers(t).entries())o&&"undefined"===i||void 0===i?r.delete(e):r.set(e,i);return r};function d(e,t,r){return Object.hasOwn(t,r)&&void 0===t[r]?[]:y(e[r]??[],t[r]??[])}let m=(e={},t={})=>({beforeRequest:d(e,t,"beforeRequest"),beforeRetry:d(e,t,"beforeRetry"),afterResponse:d(e,t,"afterResponse"),beforeError:d(e,t,"beforeError")}),y=(...e)=>{let t={},r={},o={};for(let i of e)if(Array.isArray(i))Array.isArray(t)||(t=[]),t=[...t,...i];else if(p(i)){for(let[e,r]of Object.entries(i))p(r)&&e in t&&(r=y(t[e],r)),t={...t,[e]:r};p(i.hooks)&&(o=m(o,i.hooks),t.hooks=o),p(i.headers)&&(r=f(r,i.headers),t.headers=r)}return t},g=(()=>{let e=!1,t=!1,r="function"==typeof globalThis.Request;if("function"==typeof globalThis.ReadableStream&&r)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(e){if(e instanceof Error&&"unsupported BodyInit type"===e.message)return!1;throw e}return e&&!t})(),w="function"==typeof globalThis.AbortController,b="function"==typeof globalThis.ReadableStream,_="function"==typeof globalThis.FormData,v=["get","post","put","patch","head","delete"],P={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},x=Symbol("stop"),T={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},R={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},k=e=>v.includes(e)?e.toUpperCase():e,$={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},A=(e={})=>{if("number"==typeof e)return{...$,limit:e};if(e.methods&&!Array.isArray(e.methods))throw Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw Error("retry.statusCodes must be an array");return{...$,...e}};async function q(e,t,r,o){return new Promise((i,s)=>{let n=setTimeout(()=>{r&&r.abort(),s(new c(e))},o.timeout);o.fetch(e,t).then(i).catch(s).then(()=>{clearTimeout(n)})})}async function S(e,{signal:t}){return new Promise((r,o)=>{function i(){clearTimeout(s),o(t.reason)}t&&(t.throwIfAborted(),t.addEventListener("abort",i,{once:!0}));let s=setTimeout(()=>{t?.removeEventListener("abort",i),r()},e)})}let I=(e,t)=>{let r={};for(let o in t)o in R||o in T||o in e||(r[o]=t[o]);return r};class C{static create(e,t){let r=new C(e,t),o=async()=>{if("number"==typeof r._options.timeout&&r._options.timeout>2147483647)throw RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let e=await r._fetch();for(let t of r._options.hooks.afterResponse){let o=await t(r.request,r._options,r._decorateResponse(e.clone()));o instanceof globalThis.Response&&(e=o)}if(r._decorateResponse(e),!e.ok&&r._options.throwHttpErrors){let t=new u(e,r.request,r._options);for(let e of r._options.hooks.beforeError)t=await e(t);throw t}if(r._options.onDownloadProgress){if("function"!=typeof r._options.onDownloadProgress)throw TypeError("The `onDownloadProgress` option must be a function");if(!b)throw Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(e.clone(),r._options.onDownloadProgress)}return e},i=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o();for(let[e,o]of Object.entries(P))i[e]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||o);let s=await i;if("json"===e){if(204===s.status||0===(await s.clone().arrayBuffer()).byteLength)return"";if(t.parseJson)return t.parseJson(await s.text())}return s[e]()};return i}request;abortController;_retryCount=0;_input;_options;constructor(e,t={}){if(this._input=e,this._options={...t,headers:f(this._input.headers,t.headers),hooks:m({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:k(t.method??this._input.method),prefixUrl:String(t.prefixUrl||""),retry:A(t.retry),throwHttpErrors:!1!==t.throwHttpErrors,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(w){this.abortController=new globalThis.AbortController;let e=this._options.signal??this._input.signal;e?.aborted&&this.abortController.abort(e?.reason),e?.addEventListener("abort",()=>{this.abortController.abort(e.reason)}),this._options.signal=this.abortController.signal}if(g&&(this._options.duplex="half"),void 0!==this._options.json&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){let e="string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString(),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,"?"+e);(_&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(t,{...this.request}),this._options)}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof c)throw e;if(e instanceof u){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;let t=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=1e3*Number(t);Number.isNaN(e)?e=Date.parse(t)-Date.now():e>=Date.parse("2024-01-01")&&(e-=Date.now());let r=this._options.retry.maxRetryAfter??e;return e<r?e:r}if(413===e.response.status)throw e}let t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(r){let t=Math.min(this._calculateRetryDelay(r),2147483647);if(this._retryCount<1)throw r;for(let e of(await S(t,{signal:this._options.signal}),this._options.hooks.beforeRetry))if(await e({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===x)return;return this._retry(e)}}async _fetch(){for(let e of this._options.hooks.beforeRequest){let t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}let e=I(this.request,this._options),t=this.request;return(this.request=t.clone(),!1===this._options.timeout)?this._options.fetch(t,e):q(t,e,this.abortController,this._options)}_stream(e,t){let r=Number(e.headers.get("content-length"))||0,o=0;return 204===e.status?(t&&t({percent:1,totalBytes:r,transferredBytes:o},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(i){let s=e.body.getReader();async function n(){let{done:e,value:a}=await s.read();if(e){i.close();return}t&&(o+=a.byteLength,t({percent:0===r?0:o/r,transferredBytes:o,totalBytes:r},a)),i.enqueue(a),await n()}t&&t({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array),await n()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}let D=e=>{let t=(t,r)=>C.create(t,h(e,r));for(let r of v)t[r]=(t,o)=>C.create(t,h(e,o,{method:r}));return t.create=e=>D(h(e)),t.extend=t=>("function"==typeof t&&(t=t(e??{})),D(h(e,t))),t.stop=x,t},E=D(),O=(e,t,r,o)=>{if("length"===r||"prototype"===r||"arguments"===r||"caller"===r)return;let i=Object.getOwnPropertyDescriptor(e,r),s=Object.getOwnPropertyDescriptor(t,r);(U(i,s)||!o)&&Object.defineProperty(e,r,s)},U=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},j=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},F=(e,t)=>`/* Wrapped ${e}*/
${t}`,N=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),M=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),W=(e,t,r)=>{let o=""===r?"":`with ${r.trim()}() `,i=F.bind(null,o,t.toString());Object.defineProperty(i,"name",M),Object.defineProperty(e,"toString",{...N,value:i})};var L=r(663);let H=new WeakMap,B=(e,t)=>t.some(t=>t instanceof RegExp?t.test(e):t===e),Q=new Set(["https:","http:","file:"]),z=e=>{try{let{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!Q.has(t)}catch{return!1}},J=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw Error(`Invalid URL: ${e}`);let{type:o,data:i,hash:s}=r.groups,n=o.split(";");s=t?"":s;let a=!1;"base64"===n[n.length-1]&&(n.pop(),a=!0);let l=n.shift()?.toLowerCase()??"",u=[...n.map(e=>{let[t,r=""]=e.split("=").map(e=>e.trim());return"charset"===t&&"us-ascii"===(r=r.toLowerCase())?"":`${t}${r?`=${r}`:""}`}).filter(Boolean)];return a&&u.push("base64"),(u.length>0||l&&"text/plain"!==l)&&u.unshift(l),`data:${u.join(";")},${a?i.trim():i}${s?`#${s}`:""}`};var V=(e="")=>`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`,Y=/\b([\da-f]{32})\b/,G=/\b([\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12})\b/,X=(e="",{uuid:t=!0}={})=>{if(!e||!(e=e.split("?")[0]))return null;let r=e.match(Y);if(r)return t?V(r[1]):r[1];let o=e.match(G);return o?t?o[1]:o[1].replaceAll("-",""):null},Z=e=>e.replaceAll("-",""),K=(e,t)=>{let r=t||Object.keys(e.block)[0],o=new Set;return function t(i){var s,n,a,l,u,c;if(o.has(i))return;o.add(i);let p=null==(s=e.block[i])?void 0:s.value;if(!p)return;let{content:h,type:f,properties:d,format:m}=p;if(d)for(let e of Object.keys(d)){let r=d[e];if(!r)continue;for(let e of r){let r=null==(a=null==(n=null==e?void 0:e[0])?void 0:n[1])?void 0:a[0];(null==r?void 0:r[0])==="p"&&r[1]&&t(r[1])}let o=null==(u=null==(l=null==r?void 0:r[0])?void 0:l[1])?void 0:u[0];(null==o?void 0:o[0])==="p"&&o[1]&&t(o[1])}if(m){let e=null==(c=m.transclusion_reference_pointer)?void 0:c.id;e&&t(e)}if(h&&Array.isArray(h)&&(i===r||"page"!==f&&"collection_view_page"!==f))for(let e of h)t(e)}(r),Array.from(o)},ee=function(e,{cacheKey:t,cache:r=new Map,maxAge:o}={}){"number"==typeof o&&L(r);let i=function(...i){let s=t?t(i):i[0],n=r.get(s);if(n)return n.data;let a=e.apply(this,i);return r.set(s,{data:a,maxAge:o?Date.now()+o:Number.POSITIVE_INFINITY}),a};return function(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:o}=e;for(let o of Reflect.ownKeys(t))O(e,t,o,r);j(e,t),W(e,t,o)}(i,e,{ignoreNonConfigurable:!0}),H.set(i,r),i}(e=>{if(!e)return"";try{if(e.startsWith("https://www.notion.so/image/")){let t=new URL(e),r=decodeURIComponent(t.pathname.slice(7)),o=ee(r);t.pathname=`/image/${encodeURIComponent(o)}`,e=t.toString()}return function(e,t){if("string"!=typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`),e=e.trim(),/^data:/i.test(e))return J(e,t);if(z(e))return e;let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let o=new URL(e);if(t.forceHttp&&t.forceHttps)throw Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===o.protocol&&(o.protocol="http:"),t.forceHttps&&"http:"===o.protocol&&(o.protocol="https:"),t.stripAuthentication&&(o.username="",o.password=""),t.stripHash?o.hash="":t.stripTextFragment&&(o.hash=o.hash.replace(/#?:~:text.*?$/i,"")),o.pathname){let e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,t=0,r="";for(;;){let i=e.exec(o.pathname);if(!i)break;let s=i[0],n=i.index;r+=o.pathname.slice(t,n).replace(/\/{2,}/g,"/")+s,t=n+s.length}r+=o.pathname.slice(t,o.pathname.length).replace(/\/{2,}/g,"/"),o.pathname=r}if(o.pathname)try{o.pathname=decodeURI(o.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=o.pathname.split("/");B(e[e.length-1],t.removeDirectoryIndex)&&(e=e.slice(0,-1),o.pathname=e.slice(1).join("/")+"/")}if(o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(o.hostname)&&(o.hostname=o.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let e of[...o.searchParams.keys()])B(e,t.removeQueryParameters)&&o.searchParams.delete(e);if(Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(o.search=""),Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(let e of[...o.searchParams.keys()])B(e,t.keepQueryParameters)||o.searchParams.delete(e);if(t.sortQueryParameters){o.searchParams.sort();try{o.search=decodeURIComponent(o.search)}catch{}}t.removeTrailingSlash&&(o.pathname=o.pathname.replace(/\/$/,"")),t.removeExplicitPort&&o.port&&(o.port="");let i=e;return e=o.toString(),t.removeSingleSlash||"/"!==o.pathname||i.endsWith("/")||""!==o.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===o.pathname)&&""===o.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}(e,{stripProtocol:!0,stripWWW:!0,stripHash:!0,stripTextFragment:!0,removeQueryParameters:!0})}catch(e){return""}});async function et(e,t,{concurrency:r=Number.POSITIVE_INFINITY,stopOnError:o=!0,signal:i}={}){return new Promise((s,n)=>{if(void 0===e[Symbol.iterator]&&void 0===e[Symbol.asyncIterator])throw TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof e})`);if("function"!=typeof t)throw TypeError("Mapper function is required");if(!(Number.isSafeInteger(r)&&r>=1||r===Number.POSITIVE_INFINITY))throw TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let a=[],l=[],u=new Map,c=!1,p=!1,h=!1,f=0,d=0,m=void 0===e[Symbol.iterator]?e[Symbol.asyncIterator]():e[Symbol.iterator](),y=()=>{b(i.reason)},g=()=>{i?.removeEventListener("abort",y)},w=e=>{s(e),g()},b=e=>{c=!0,p=!0,n(e),g()};i&&(i.aborted&&b(i.reason),i.addEventListener("abort",y,{once:!0}));let _=async()=>{if(p)return;let e=await m.next(),r=d;if(d++,e.done){if(h=!0,0===f&&!p){if(!o&&l.length>0){b(AggregateError(l));return}if(p=!0,0===u.size){w(a);return}let e=[];for(let[t,r]of a.entries())u.get(t)!==er&&e.push(r);w(e)}return}f++,(async()=>{try{let o=await e.value;if(p)return;let i=await t(o,r);i===er&&u.set(r,i),a[r]=i,f--,await _()}catch(e){if(o)b(e);else{l.push(e),f--;try{await _()}catch(e){b(e)}}}})()};(async()=>{for(let e=0;e<r;e++){try{await _()}catch(e){b(e);break}if(h||c)break}})()})}let er=Symbol("skip");var eo=class{_apiBaseUrl;_authToken;_activeUser;_userTimeZone;_kyOptions;constructor({apiBaseUrl:e="https://www.notion.so/api/v3",authToken:t,activeUser:r,userTimeZone:o="America/New_York",kyOptions:i}={}){this._apiBaseUrl=e,this._authToken=t,this._activeUser=r,this._userTimeZone=o,this._kyOptions=i}async getPage(e,{concurrency:t=3,fetchMissingBlocks:r=!0,fetchCollections:o=!0,signFileUrls:i=!0,chunkLimit:s=100,chunkNumber:n=0,kyOptions:a}={}){let l=await this.getPageRaw(e,{chunkLimit:s,chunkNumber:n,kyOptions:a}),u=l?.recordMap;if(!u?.block)throw Error(`Notion page not found "${Z(e)}"`);if(u.collection=u.collection??{},u.collection_view=u.collection_view??{},u.notion_user=u.notion_user??{},u.collection_query={},u.signed_urls={},r)for(;;){let e=K(u).filter(e=>!u.block[e]);if(!e.length)break;let t=await this.getBlocks(e,a).then(e=>e.recordMap.block);u.block={...u.block,...t}}let c=K(u);if(o){let r=c.flatMap(e=>{let t=u.block[e]?.value,r=t&&("collection_view"===t.type||"collection_view_page"===t.type)&&function(e,t){var r,o,i,s,n,a,l;let u=e.collection_id||(null==(o=null==(r=e.format)?void 0:r.collection_pointer)?void 0:o.id);if(u)return u;let c=null==(i=null==e?void 0:e.view_ids)?void 0:i[0];if(c){let e=null==(n=null==(s=t.collection_view)?void 0:s[c])?void 0:n.value;if(e)return null==(l=null==(a=e.format)?void 0:a.collection_pointer)?void 0:l.id}return null}(t,u);return r?t.view_ids?.map(e=>({collectionId:r,collectionViewId:e})):[]});await et(r,async t=>{let{collectionId:r,collectionViewId:o}=t,i=u.collection_view[o]?.value;try{let e=await this.getCollectionData(r,o,i,{kyOptions:a});u.block={...u.block,...e.recordMap.block},u.collection={...u.collection,...e.recordMap.collection},u.collection_view={...u.collection_view,...e.recordMap.collection_view},u.notion_user={...u.notion_user,...e.recordMap.notion_user},u.collection_query[r]={...u.collection_query[r],[o]:e.result?.reducerResults}}catch(t){console.warn("NotionAPI collectionQuery error",e,t.message),console.error(t)}},{concurrency:t})}return i&&await this.addSignedUrls({recordMap:u,contentBlockIds:c,kyOptions:a}),u}async addSignedUrls({recordMap:e,contentBlockIds:t,kyOptions:r={}}){e.signed_urls={},t||(t=K(e));let o=t.flatMap(t=>{let r=e.block[t]?.value;if(r&&("pdf"===r.type||"audio"===r.type||"image"===r.type&&r.file_ids?.length||"video"===r.type||"file"===r.type||"page"===r.type)){let e="page"===r.type?r.format?.page_cover:r.properties?.source?.[0]?.[0];if(e&&(e.includes("secure.notion-static.com")||e.includes("prod-files-secure")))return{permissionRecord:{table:"block",id:r.id},url:e}}return[]});if(o.length>0)try{let{signedUrls:t}=await this.getSignedFileUrls(o,r);if(t.length===o.length)for(let[r,i]of o.entries()){let o=t[r];if(!o)continue;let s=i.permissionRecord.id;s&&(e.signed_urls[s]=o)}}catch(e){console.warn("NotionAPI getSignedfileUrls error",e)}}async getPageRaw(e,{kyOptions:t,chunkLimit:r=100,chunkNumber:o=0}={}){let i=X(e);if(!i)throw Error(`invalid notion pageId "${e}"`);return this.fetch({endpoint:"loadPageChunk",body:{pageId:i,limit:r,chunkNumber:o,cursor:{stack:[]},verticalColumns:!1},kyOptions:t})}async getCollectionData(e,t,r,{limit:o=9999,searchQuery:i="",userTimeZone:s=this._userTimeZone,loadContentCover:n=!0,kyOptions:a}={}){let l=r?.type,u="board"===l,c=u?r?.format?.board_columns_by:r?.format?.collection_group_by,p=[];r?.format?.property_filters&&(p=r.format?.property_filters.map(e=>({filter:e?.filter?.filter,property:e?.filter?.property}))),r?.query2?.filter?.filters&&p.push(...r.query2.filter.filters);let h={type:"reducer",reducers:{collection_group_results:{type:"results",limit:o,loadContentCover:n}},sort:[],...r?.query2,filter:{filters:p,operator:"and"},searchQuery:i,userTimeZone:s};if(c){let e=r?.format?.board_columns||r?.format?.collection_groups||[],t=[u?"board":"group_aggregation","results"],n={checkbox:"checkbox_is",url:"string_starts_with",text:"string_starts_with",select:"enum_is",multi_select:"enum_contains",created_time:"date_is_within",undefined:"is_empty"},a={};for(let r of e){let{property:e,value:{value:i,type:s}}=r;for(let r of t){let t="results"===r?{type:r,limit:o}:{type:"aggregation",aggregation:{aggregator:"count"}},l=void 0===i,u=i?.range,c=l?"uncategorized":u?i.range?.start_date||i.range?.end_date:i?.value||i,p=!l&&(u||i?.value||i);a[`${r}:${s}:${c}`]={...t,filter:{operator:"and",filters:[{property:e,filter:{operator:l?"is_empty":n[s],...!l&&{value:{type:"exact",value:p}}}}]}}}}h={type:"reducer",reducers:{[u?"board_columns":`${l}_groups`]:{type:"groups",groupBy:c,...r?.query2?.filter&&{filter:r?.query2?.filter},groupSortPreference:e.map(e=>e?.value),limit:o},...a},...r?.query2,searchQuery:i,userTimeZone:s,filter:{filters:p,operator:"and"}}}return this.fetch({endpoint:"queryCollection",body:{collection:{id:e},collectionView:{id:t},loader:h},kyOptions:a})}async getUsers(e,t){return this.fetch({endpoint:"getRecordValues",body:{requests:e.map(e=>({id:e,table:"notion_user"}))},kyOptions:t})}async getBlocks(e,t){return this.fetch({endpoint:"syncRecordValues",body:{requests:e.map(e=>({table:"block",id:e,version:-1}))},kyOptions:t})}async getSignedFileUrls(e,t){return this.fetch({endpoint:"getSignedFileUrls",body:{urls:e},kyOptions:t})}async search(e,t){let r={type:"BlocksInAncestor",source:"quick_find_public",ancestorId:X(e.ancestorId),sort:{field:"relevance"},limit:e.limit||20,query:e.query,filters:{isDeletedOnly:!1,isNavigableOnly:!1,excludeTemplates:!0,requireEditPermissions:!1,ancestors:[],createdBy:[],editedBy:[],lastEditedTime:{},createdTime:{},...e.filters}};return this.fetch({endpoint:"search",body:r,kyOptions:t})}async fetch({endpoint:e,body:t,kyOptions:r,headers:o}){let i={...o,...this._kyOptions?.headers,...r?.headers,"Content-Type":"application/json"};this._authToken&&(i.cookie=`token_v2=${this._authToken}`),this._activeUser&&(i["x-notion-active-user-header"]=this._activeUser);let s=`${this._apiBaseUrl}/${e}`;return E.post(s,{...this._kyOptions,...r,json:t,headers:i}).json()}};let ei="https://notion-api.splitbee.io/v1",es=process.env.NOTION_PAGE_ID;process.env.NOTION_PROFILE_ID,new eo;let en=async()=>{try{let e=await fetch(`${ei}/table/${es}`,{next:{revalidate:10}});if(!e.ok)throw Error(`Failed to fetch posts: ${e.status}`);let t=await e.json();return(await Promise.all(t.filter(e=>e.Public).map(async e=>{let t=await fetch(`${ei}/page/${e.id}`),r=await t.json(),o=Object.values(r).find(e=>e?.value?.type==="page"),i="/default-cover.jpg";if(o?.value?.format?.page_cover){let t=o.value.format.page_cover;i=t.startsWith("https://prod-files-secure")?`https://www.notion.so/image/${encodeURIComponent(t)}?table=block&id=${e.id}&width=3840`:t.startsWith("/images")?`https://www.notion.so${t}`:`https://www.notion.so/image/${encodeURIComponent(t)}?table=block&id=${e.id}&width=3840`}let s=null;if(o?.value?.format?.page_icon){let e=o.value.format.page_icon;if(1===e.length||2===e.length||e.startsWith("\uD83C\uDFFA"))s=e;else if(e.startsWith("http"))s=e;else if(e.includes("notion.so"))try{let t=decodeURIComponent(e);s=t.startsWith("\uD83C\uDFFA")?t:e}catch{s=e}}let n=e.AuthorImage||"/default-avatar.png";if(o?.value?.format?.page_icon){let e=o.value.format.page_icon;if(1===e.length||2===e.length||e.startsWith("\uD83C\uDFFA"))n=e;else if(e.startsWith("http"))n=e;else if(e.includes("notion.so"))try{let t=decodeURIComponent(e);n=t.startsWith("\uD83C\uDFFA")?t:e}catch{n=e}}let a=e.Published?new Date(e.Published).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];return{id:e.id,title:e.Name||"無題",slug:e.Slug||`untitled-${e.id}`,date:a,author:{name:e.Author||"匿名",image:n,bio:e.AuthorBio||""},coverImage:i,tags:Array.isArray(e.Tags)?e.Tags:[],description:e.Description||"",excerpt:e.Description||"",content:"",featured:e.Featured||!1,icon:s}}))).sort((e,t)=>e.featured&&!t.featured?-1:!e.featured&&t.featured?1:new Date(t.date).getTime()-new Date(e.date).getTime())}catch(e){return console.error("Error fetching all posts:",e),[]}};async function ea(){let e="http://localhost:3000",t=await en(),r=t.map(t=>({url:`${e}/posts/${t.slug}`,lastModified:new Date(t.date),changeFrequency:"weekly",priority:t.featured?1:.7})),o=new Set;t.forEach(e=>{e.tags.forEach(e=>o.add(e.toLowerCase()))});let i=Array.from(o).map(t=>({url:`${e}/tags/${encodeURIComponent(t)}`,lastModified:new Date,changeFrequency:"weekly",priority:.5}));return[{url:e,lastModified:new Date,changeFrequency:"daily",priority:1},{url:`${e}/profile`,lastModified:new Date,changeFrequency:"monthly",priority:.8},{url:`${e}/search`,lastModified:new Date,changeFrequency:"weekly",priority:.5},...r,...i]}var el=r(707);let eu={...o},ec=eu.default,ep=eu.generateSitemaps;if("function"!=typeof ec)throw Error('Default export is missing in "C:\\Users\\じゅぶ\\Desktop\\dev\\book\\simple-blog\\app\\sitemap.ts"');async function eh(e,t){let r;let{__metadata_id__:o,...i}=t.params||{},s=ep?await ep():null;if(s&&null==(r=s.find(e=>{let t=e.id.toString();return(t+=".xml")===o})?.id))return new l.NextResponse("Not Found",{status:404});let n=await ec({id:r}),a=(0,el.resolveRouteData)(n,"sitemap");return new l.NextResponse(a,{headers:{"Content-Type":"application/xml","Cache-Control":"public, max-age=0, must-revalidate"}})}let ef=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/sitemap.xml/route",pathname:"/sitemap.xml",filename:"sitemap",bundlePath:"app/sitemap.xml/route"},resolvedPagePath:"next-metadata-route-loader?page=%2Fsitemap.xml%2Froute&filePath=C%3A%5CUsers%5C%E3%81%98%E3%82%85%E3%81%B6%5CDesktop%5Cdev%5Cbook%5Csimple-blog%5Capp%5Csitemap.ts&isDynamic=1!?__next_metadata_route__",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:ed,staticGenerationAsyncStorage:em,serverHooks:ey}=ef,eg="/sitemap.xml/route";function ew(){return(0,a.patchFetch)({serverHooks:ey,staticGenerationAsyncStorage:em})}},663:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,s){function n(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(n,a)}l((o=o.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=i(r(4909));function n(e,t="maxAge"){let r,i,n;let a=()=>o(this,void 0,void 0,function*(){if(void 0!==r)return;let a=a=>o(this,void 0,void 0,function*(){n=s.default();let o=a[1][t]-Date.now();if(o<=0){e.delete(a[0]),n.resolve();return}return r=a[0],"function"==typeof(i=setTimeout(()=>{e.delete(a[0]),n&&n.resolve()},o)).unref&&i.unref(),n.promise});try{for(let t of e)yield a(t)}catch(e){}r=void 0}),l=()=>{r=void 0,void 0!==i&&(clearTimeout(i),i=void 0),void 0!==n&&(n.reject(void 0),n=void 0)},u=e.set.bind(e);return e.set=(t,o)=>{e.has(t)&&e.delete(t);let i=u(t,o);return r&&r===t&&l(),a(),i},a(),e}t.default=n,e.exports=n,e.exports.default=n},707:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{resolveManifest:function(){return n},resolveRobots:function(){return i},resolveRouteData:function(){return a},resolveSitemap:function(){return s}});let o=r(1389);function i(e){let t="";for(let r of Array.isArray(e.rules)?e.rules:[e.rules]){for(let e of(0,o.resolveArray)(r.userAgent||["*"]))t+=`User-Agent: ${e}
`;if(r.allow)for(let e of(0,o.resolveArray)(r.allow))t+=`Allow: ${e}
`;if(r.disallow)for(let e of(0,o.resolveArray)(r.disallow))t+=`Disallow: ${e}
`;r.crawlDelay&&(t+=`Crawl-delay: ${r.crawlDelay}
`),t+="\n"}return e.host&&(t+=`Host: ${e.host}
`),e.sitemap&&(0,o.resolveArray)(e.sitemap).forEach(e=>{t+=`Sitemap: ${e}
`}),t}function s(e){let t=e.some(e=>Object.keys(e.alternates??{}).length>0),r="";for(let i of(r+='<?xml version="1.0" encoding="UTF-8"?>\n<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"',t?r+=' xmlns:xhtml="http://www.w3.org/1999/xhtml">\n':r+=">\n",e)){var o;r+=`<url>
<loc>${i.url}</loc>
`;let e=null==(o=i.alternates)?void 0:o.languages;if(e&&Object.keys(e).length)for(let t in e)r+=`<xhtml:link rel="alternate" hreflang="${t}" href="${e[t]}" />
`;if(i.lastModified){let e=i.lastModified instanceof Date?i.lastModified.toISOString():i.lastModified;r+=`<lastmod>${e}</lastmod>
`}i.changeFrequency&&(r+=`<changefreq>${i.changeFrequency}</changefreq>
`),"number"==typeof i.priority&&(r+=`<priority>${i.priority}</priority>
`),r+="</url>\n"}return r+"</urlset>\n"}function n(e){return JSON.stringify(e)}function a(e,t){return"robots"===t?i(e):"sitemap"===t?s(e):"manifest"===t?n(e):""}},1389:(e,t)=>{function r(e){return Array.isArray(e)?e:[e]}function o(e){if(null!=e)return r(e)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{resolveArray:function(){return r},resolveAsArrayOrUndefined:function(){return o}})},4909:e=>{e.exports=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,2518],()=>r(4807));module.exports=o})();